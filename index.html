<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Project Zeppelin | Snippets</title>
  <link rel="stylesheet" href="scss/style.scss">
</head>

<body>
  <pre><code id="code"></code></pre>
  <script src="js/prism.js"></script>
  <script>
    function getLangShort(short) {
      switch (short) {
        case 'cs':
            return 'csharp'
          break;
        case 'py':
            return 'python'
          break;
        case 'js':
            return 'javascript'
          break;
        case 'ts':
            return 'typescript'
          break;
        case 'sh':
            return 'bash'
          break;
        default:
            return short;
          break;
      }
    }
    // Get Request Parameters
    let pathArray = window.location.search.split('/');
    // Quick check if request is valid
    if (pathArray[2] == "raw") {
      // Set Base Path
      let gistPath = "https://gist.githubusercontent.com";
      // Remove ?
      while (pathArray[0].charAt(0) === '?') {
        pathArray[0] = pathArray[0].substr(1);
      }
      // Create request link
      pathArray.forEach(element => {
        gistPath += "/" + element;
      });
      // Do request
      fetch(gistPath).then(res => res.status == 200 ? res.text() : null).then(text => {
        document.getElementById('code').classList.add('language-' + getLangShort(pathArray[4].split('.')[1]));
        if (text) {
          document.getElementById('code').innerText = text;
          setTimeout(() => {
            Prism.highlightAll();
          }, 10);
        } else {
          document.getElementById('code').innerText = 'Data failed to load...';
        }
      });
    }
  </script>

</body>

</html>